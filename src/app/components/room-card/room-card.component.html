<div
    (click)="goToRoom(room.room_id)"
    class="relative flex flex-col justify-between p-4 border rounded-lg shadow-sm hover:ring-2 focus:outline-none transition-all duration-150 cursor-pointer"
    [ngClass]="borderClass"
>
    <div class="flex justify-between items-center">
        <h3 class="text-lg font-semibold text-gray-800">
            {{ room.room_name }}
        </h3>

        <button
            *ngIf="showActions"
            (click)="toggleMenu($event)"
            class="text-gray-500 hover:text-gray-700 p-1 rounded-full hover:bg-gray-200 transition-colors"
        >
            <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5"
                viewBox="0 0 20 20"
                fill="currentColor"
            >
                <path
                    d="M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"
                />
            </svg>
        </button>
    </div>

    <p class="text-sm text-gray-600 truncate mt-2">
        {{ room.room_description }}
    </p>

    <div class="flex justify-between items-center mt-4">
        <span
            class="text-xs px-2 py-0.5 rounded-full font-medium"
            [ngClass]="bgClass"
        >
            {{ room.member_count }} / {{ room.max_members }} membros
        </span>
        <span class="text-xs text-gray-400">
            {{ room.is_public ? "PÃºblica" : "Privada" }}
        </span>
    </div>

    <div
        *ngIf="showMenu"
        class="absolute top-10 right-2 w-48 bg-white rounded-md shadow-xl z-20 border border-gray-100"
        (click)="$event.stopPropagation()"
    >
        <a
            (click)="editRoom()"
            class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 cursor-pointer"
        >
            Editar
        </a>
        <a
            (click)="goToMembers()"
            class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 cursor-pointer"
        >
            Ver Membros
        </a>
        <div class="border-t border-gray-100"></div>
        <a
            (click)="deleteRoom()"
            class="block px-4 py-2 text-sm text-red-600 hover:bg-red-50 cursor-pointer"
        >
            Excluir
        </a>
    </div>
</div>

<div
    *ngIf="showMenu"
    (click)="closeMenu()"
    class="fixed inset-0 z-10 cursor-default"
></div>
