<div class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50">
    <div class="bg-white rounded-xl shadow-xl w-full max-w-md p-6">
        <h2 class="text-xl font-bold mb-4 text-gray-800">Criar Nova Sala</h2>

        <form [formGroup]="roomForm" (ngSubmit)="onSubmit()" class="space-y-4">
            <!-- Nome da Sala -->
            <div>
                <label class="block text-sm font-medium text-gray-700">
                    Nome da Sala *
                </label>
                <input
                    formControlName="room_name"
                    type="text"
                    class="mt-1 w-full border rounded-md p-2"
                    [class.border-red-500]="roomForm.get('room_name')?.invalid && roomForm.get('room_name')?.touched"
                >
                <div *ngIf="roomForm.get('room_name')?.invalid && roomForm.get('room_name')?.touched" 
                     class="text-red-500 text-xs mt-1">
                    <span *ngIf="roomForm.get('room_name')?.errors?.['required']">
                        Nome é obrigatório.
                    </span>
                    <span *ngIf="roomForm.get('room_name')?.errors?.['minlength']">
                        Nome deve ter pelo menos 3 caracteres.
                    </span>
                </div>
            </div>

            <!-- Descrição -->
            <div>
                <label class="block text-sm font-medium text-gray-700">
                    Descrição
                </label>
                <textarea
                    formControlName="room_description"
                    rows="3"
                    class="mt-1 w-full border rounded-md p-2"
                ></textarea>
                <div *ngIf="roomForm.get('room_description')?.errors?.['maxlength']" 
                     class="text-red-500 text-xs mt-1">
                    Descrição não pode exceder 200 caracteres.
                </div>
            </div>

            <!-- Máximo de Membros -->
            <div>
                <label class="block text-sm font-medium text-gray-700">
                    Máximo de Membros *
                </label>
                <input
                    formControlName="max_members"
                    type="number"
                    class="mt-1 w-full border rounded-md p-2"
                    [class.border-red-500]="roomForm.get('max_members')?.invalid && roomForm.get('max_members')?.touched"
                >
                <div *ngIf="roomForm.get('max_members')?.invalid && roomForm.get('max_members')?.touched" 
                     class="text-red-500 text-xs mt-1">
                    <span *ngIf="roomForm.get('max_members')?.errors?.['required']">
                        Campo obrigatório.
                    </span>
                    <span *ngIf="roomForm.get('max_members')?.errors?.['min']">
                        Mínimo de 2 membros.
                    </span>
                    <span *ngIf="roomForm.get('max_members')?.errors?.['max']">
                        Máximo de 100 membros.
                    </span>
                </div>
            </div>
            
            <!-- Pública/Privada -->
            <div>
                <label class="flex items-center gap-2">
                    <input type="checkbox" formControlName="is_public" />
                    Sala Pública
                </label>
            </div>

            <div class="flex justify-end gap-3 pt-4">
                <button
                    type="button"
                    (click)="onCancel()"
                    [disabled]="loading"
                    class="px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 disabled:opacity-50"
                >
                    Cancelar
                </button>
                <button
                    type="submit"
                    [disabled]="roomForm.invalid || loading"
                    class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 flex items-center justify-center"
                >
                    <span *ngIf="!loading">Criar</span>
                    <span *ngIf="loading">Criando...</span>
                </button>
            </div>
        </form>
    </div>
</div>