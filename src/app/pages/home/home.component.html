<div class="min-h-screen bg-gradient-to-b from-blue-50 via-gray-50 to-white pb-20">
    <!-- Navbar -->
    <header class="bg-white/80 backdrop-blur shadow-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
            <h1 class="text-2xl font-bold text-blue-700 tracking-tight">
                Goverse
            </h1>
            <button
                (click)="logout()"
                class="text-sm font-medium text-gray-700 hover:text-red-600 transition-colors duration-200"
            >
                Sair
            </button>
        </div>
    </header>

    <!-- Overlay de carregamento -->
    <div *ngIf="loading" class="fixed inset-0 bg-black bg-opacity-20 flex items-center justify-center z-50">
        <div class="bg-white p-6 rounded-lg shadow-xl flex items-center">
            <div class="animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500 mr-4"></div>
            <span class="text-lg font-medium">Carregando salas...</span>
        </div>
    </div>

    <main class="max-w-7xl mx-auto px-4 pt-12 space-y-16">
        <!-- Título principal + botão -->
        <div class="flex flex-col sm:flex-row justify-between items-center gap-4">
            <h2 class="text-4xl font-extrabold text-gray-900 text-center sm:text-left">
                Suas Salas
            </h2>
            <button
                (click)="onCreateRoom()"
                class="inline-flex items-center px-5 py-3 bg-blue-600 text-white text-sm font-semibold rounded-xl shadow-md hover:bg-blue-700 hover:scale-105 transition-all"
            >
                <svg
                    class="w-5 h-5 mr-2"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    viewBox="0 0 24 24"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M12 4v16m8-8H4"
                    />
                </svg>
                Criar nova sala
            </button>
        </div>

        <!-- Salas criadas -->
        <section [class.opacity-70]="loading">
            <h3 class="text-2xl font-semibold text-gray-800 mb-6 border-b pb-2">
                Salas que você criou
            </h3>
            <div
                *ngIf="ownedRooms.length; else noOwned"
                class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"
            >
                <app-room-card
                    *ngFor="let room of ownedRooms"
                    [room]="room"
                    color="blue"
                ></app-room-card>
            </div>
            <ng-template #noOwned>
                <p class="text-gray-500 italic mt-2">
                    Você ainda não criou nenhuma sala.
                </p>
            </ng-template>
        </section>

        <!-- Salas participadas -->
        <section [class.opacity-70]="loading">
            <h3 class="text-2xl font-semibold text-gray-800 mb-6 border-b pb-2">
                Salas que você participa
            </h3>
            <div
                *ngIf="joinedRooms.length; else noJoined"
                class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"
            >
                <app-room-card
                    *ngFor="let room of joinedRooms"
                    [room]="room"
                    color="green"
                ></app-room-card>
            </div>
            <ng-template #noJoined>
                <p class="text-gray-500 italic mt-2">
                    Você ainda não participa de nenhuma sala.
                </p>
            </ng-template>
        </section>
    </main>
    <app-create-room-modal
        *ngIf="showCreateModal"
        (close)="onModalClose()"
        (roomCreated)="onRoomCreated($event)"
    ></app-create-room-modal>
</div>